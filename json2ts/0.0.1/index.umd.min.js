var x=(t,l)=>()=>(l||t((l={exports:{}}).exports,l),l.exports);var ee=x(g=>{(function(t,l){if(typeof define=="function"&&define.amd)define(["exports"],l);else if(typeof g<"u")l(g);else{var v={exports:{}};l(v.exports),t.json2ts=v.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:g,function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STRING_TYPE=t.ROOT_TYPE=t.ROOT_KEY=t.OBJECT_TYPE=t.NUMBER_TYPE=t.NEXT_COMMENT=t.LAST_COMMENT=t.COMMENT_KEY=t.ARRAY_TYPE=t.ARRAY_ITEM=void 0,t.json2ts=t.default=Z,t.parse=d,t.traverser=K;function l(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function v(e,r){for(var n=0;n<r.length;n++){var u=r[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}function $(e,r,n){return r&&v(e.prototype,r),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function T(e){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},T(e)}var V="Root";t.ROOT_TYPE=V;var p="string";t.STRING_TYPE=p;var O="number";t.NUMBER_TYPE=O;var m="Object";t.OBJECT_TYPE=m;var b="Array";t.ARRAY_TYPE=b;var A="root";t.ROOT_KEY=A;var o="$ARRAY_ITEM$";t.ARRAY_ITEM=o;var R="$COMMENT_KEY$";t.COMMENT_KEY=R;var Y="$LAST_COMMENT$";t.LAST_COMMENT=Y;var N="$NEXT_COMMENT$";t.NEXT_COMMENT=N;function E(e){var r=e.offset,n=e.column,u=e.line;return{offset:r,column:n,line:u}}function C(e,r,n){return n=n||E(e),{start:r,end:n,source:e.originalSource.slice(r.offset,n.offset)}}function B(e,r){return{options:r,column:1,line:1,offset:0,originalSource:e,source:e}}function G(e){return{key:A,type:V,value:e}}function P(e){return!e.source}function I(e,r){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:r.length,u=0,i=-1,a=0;a<n;a++)r.charCodeAt(a)===10&&(u++,i=a);e.offset+=n,e.line+=u,e.column=i===-1?e.column+n:n-i}function f(e,r){var n=e.source;I(e,n,r),e.source=n.slice(r)}function y(e){var r=/^[\t\r\n\f ]+/.exec(e.source);r&&r[0]&&f(e,r[0].length)}function S(e,r){y(e);var n=E(e),u=r||L(e),i=J(e),a=i.value,s=i.type,c=C(e,n);return y(e),e.source[0]===","&&(f(e,1),y(e)),{key:u,value:a,type:s,loc:c}}function _(e){for(var r=[];!P(e);){y(e);var n=e.source;if(n[0]==="{")f(e,1);else{if(n[0]==="}")return f(e,1),y(e),r;if(n[0]==="/")if(n[1]==="/"){var u=r[r.length-1],i=-1;u&&(i=u.loc.end.line);var a=E(e).line;r.push(F(e,a===i)),y(e)}else throw new Error("\u9519\u8BEF\u7684\u5907\u6CE8");else r.push(S(e))}}return r}function L(e){var r=e.source[0],n=[];return r==='"'?n=/^"(.[^"]*)/i.exec(e.source):r==="'"?n=/^'(.[^']*)/i.exec(e.source):(n=/(.[^:]*)/i.exec(e.source),n[1]=n[1].trim()),f(e,n[0].length+1),y(e),e.source[0]===":"&&(f(e,1),y(e)),n[1]}function U(e){var r=/^([0-9]*)/i.exec(e.source);return f(e,r[0].length),r[1]}function X(e){var r=/^["|']([^"|']*)/i.exec(e.source);return f(e,r[0].length+1),r[1]}function J(e){var r=null,n=null,u=e.source[0];return/^[0-9]/.test(u)?(r=U(e),n=O):u==='"'||u==="'"?(r=X(e),n=p):u==="["?(f(e,1),r=q(e),n=b):u==="{"&&(r=_(e),n=m),{value:r,type:n}}function q(e){for(var r=[];!P(e);)if(r.push(S(e,o)),e.source[0]==="]")return f(e,1),r;return r}function F(e,r){var n=/^\/\/\s*(.[^\t\n\r\f]*)/i.exec(e.source),u=E(e),i=n[1],a=r?Y:N;return f(e,n[0].length),{key:a,value:i,type:R,loc:C(e,u)}}function d(e,r){var n=B(e,r);return G(_(n))}function j(e){return Object.prototype.toString.call(e)}function M(e){return T(e)==="object"&&j(e).slice(8,-1)==="Array"}function k(e){return T(e)==="object"&&j(e).slice(8,-1)==="Object"}function z(e){return e.replace(/( |^)[a-z]/g,function(r){return r.toUpperCase()})}function w(e,r,n){e.forEach(function(u){var i=n[u.type];i&&i.entry&&i.entry(u,r),M(u.value)&&w(u.value,u,n),i&&i.exit&&i.exit(u,r)})}function K(e,r){var n=r.Root;return n&&n.entry&&n.entry(e,null),w(e.value,e,r),n&&n.exit&&n.exit(e,null),e}function D(e,r){var n;return K(e,(n={},h(n,p,{entry:function(i,a){i.key===o?(a.typeValue=a.typeValue||[],a.typeValue.push(i.type)):(a.typeValue=a.typeValue||{},a.typeValue[i.key]=i.type)}}),h(n,O,{entry:function(i,a){i.key===o?(a.typeValue=a.typeValue||[],a.typeValue.push(i.type)):(a.typeValue=a.typeValue||{},a.typeValue[i.key]=i.type)}}),h(n,m,{entry:function(i,a){i.key===o?(a.typeValue=a.typeValue||[],i.typeValue={},a.typeValue.push(i.typeValue)):(a.typeValue=a.typeValue||{},a.typeValue[i.key]=i.typeValue={})}}),h(n,b,{entry:function(i,a){i.key===o?(a.typeValue=a.typeValue||[],i.typeValue=[],a.typeValue.push(i.typeValue)):(a.typeValue=a.typeValue||{},a.typeValue[i.key]=i.typeValue=[])}}),n)),e}var W=function(){function e(r,n){l(this,e),this.ast=r,this.options=n,this.prefix=n.typePrefix||"",this.suffix=n.typeSuffix||"Type",this.vars="",this.i=-1}return $(e,[{key:"beginGen",value:function(){var n=this.genName("Result"),u=this.ast.typeValue,i=this.gen(u);return"".concat(this.vars,"type ").concat(n," = ").concat(i)}},{key:"gen",value:function(n){var u=`{
`;for(var i in n){var a=n[i];u+=this.genKey(i),k(a)?u+=this.genObjcet(i,a):M(a)?u+=this.options.parseArray?this.genArray(i,a):"Array<any>":u+=a,this.options.semicolon&&(u+=";"),u+=`
`}return u+="}",u}},{key:"genName",value:function(n){return this.i++,"".concat(this.prefix).concat(z(n),"$").concat(this.i).concat(this.suffix)}},{key:"genKey",value:function(n){return"".concat(n).concat(this.options.required?": ":"?: ")}},{key:"genObjcet",value:function(n,u){var i="",a=this.gen(u);if(this.options.spiltType){var s=this.genName(n);this.vars+="type ".concat(s," = ").concat(a,`;
`),i+=s}else i+=a;return i}},{key:"genArray",value:function(n,u){var i=this,a="Array< ",s=new Set;return u.forEach(function(c){M(c)&&s.add(i.genArray(n,c)),k(c)?s.add(i.genObjcet(n,c)):s.add(c)}),a+=Array.from(s).join(" | "),a+=" >",a}}]),e}();function H(e,r){return new W(e,r).beginGen()}function Q(e){var r={spiltType:!0,parseArray:!1,required:!0,semicolon:!1};return Object.assign(r,e),r}function Z(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Q(r),u=d(e,n);return D(u),H(u,n)}})});export default ee();
