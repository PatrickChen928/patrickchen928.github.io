import{a as D,T as st}from"./index.85b17bff.js";import{c as N,i as it,h as ct,D as rt,C as $,z as P,s as at,r as V,e as lt,m as ut,u as dt}from"./use-translate.f00dec62.js";import{t as ft,n as F,a as ht,w as M}from"./with-install.8c05f7e9.js";import{u as mt}from"./use-touch.8bab3413.js";import{u as U}from"./use-expose.e5d76f3d.js";import{z as I,C as S,B as A,E as pt,x as H,e as c,Q as xt,L as gt,q as vt,D as bt,o as _,c as yt,w as b,A as o,a as X,b as Y,d as q,F as K,h as Tt,t as Ct}from"./vue-libs.dea03542.js";import{u as jt}from"./index.9fc8b336.js";import{u as St}from"./useChildren.3c3a8afb.js";import{u as kt}from"./index.c020d7aa.js";import{f as It}from"./constant.bdedcaa1.js";import{u as At}from"./useParent.e8f23fef.js";import{C as y}from"./index.45245c12.js";import"./use-route.8c8b61a6.js";import"./index.f3fd5100.js";import"./on-popup-reopen.f4e064e0.js";import"./utils.51167448.js";import"./interceptor.3309ba7f.js";import"./use-refs.ca62e258.js";import"./index.d1cfdb12.js";import"./index.bd074117.js";function _t(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!gt(e)}function wt(){const e="A".charCodeAt(0);return Array(26).fill("").map((n,l)=>String.fromCharCode(e+l))}const[Q,w]=N("index-bar"),Lt={sticky:ft,zIndex:F,teleport:[String,Object],highlightColor:String,stickyOffsetTop:ht(0),indexList:{type:Array,default:wt}},Z=Symbol(Q);var Ot=I({name:Q,props:Lt,emits:["select","change"],setup(e,{emit:r,slots:n}){const l=S(),d=S(""),p=mt(),u=jt(l),{children:x,linkChildren:s}=St(Z);s({props:e});const T=A(()=>{if(it(e.zIndex))return{zIndex:+e.zIndex+1}}),C=A(()=>{if(e.highlightColor)return{color:e.highlightColor}}),W=(t,i)=>{for(let a=x.length-1;a>=0;a--){const h=a>0?i[a-1].height:0,f=e.sticky?h+e.stickyOffsetTop:0;if(t+f>=i[a].top)return a}return-1},L=()=>{if(rt(l))return;const{sticky:t,indexList:i}=e,a=$(u.value),h=P(u),f=x.map(k=>k.getRect(u.value,h)),g=W(a,f);d.value=i[g],t&&x.forEach((k,v)=>{const{state:m,$el:nt}=k;if(v===g||v===g-1){const j=nt.getBoundingClientRect();m.left=j.left,m.width=j.width}else m.left=null,m.width=null;if(v===g)m.active=!0,m.top=Math.max(e.stickyOffsetTop,f[v].top-a)+h.top;else if(v===g-1){const j=f[g].top-a;m.active=j>0,m.top=j+h.top-f[v].height}else m.active=!1})},O=()=>vt(L);kt("scroll",L,{target:u}),pt(O),H(()=>e.indexList,O),H(d,t=>{t&&r("change",t)});const tt=()=>e.indexList.map(t=>{const i=t===d.value;return c("span",{class:w("index",{active:i}),style:i?C.value:void 0,"data-index":t},[t])}),B=t=>{t=String(t);const i=x.find(a=>String(a.index)===t);i&&(i.$el.scrollIntoView(),e.sticky&&e.stickyOffsetTop&&at(V()-e.stickyOffsetTop),r("select",i.index))},R=t=>{const{index:i}=t.dataset;i&&B(i)},et=t=>{R(t.target)};let E;const ot=t=>{if(p.move(t),p.isVertical()){ct(t);const{clientX:i,clientY:a}=t.touches[0],h=document.elementFromPoint(i,a);if(h){const{index:f}=h.dataset;f&&E!==f&&(E=f,R(h))}}},z=()=>c("div",{class:w("sidebar"),style:T.value,onClick:et,onTouchstart:p.start,onTouchmove:ot},[tt()]);return U({scrollTo:B}),()=>{var i;let t;return c("div",{ref:l,class:w()},[e.teleport?c(xt,{to:e.teleport},_t(t=z())?t:{default:()=>[t]}):z(),(i=n.default)==null?void 0:i.call(n)])}}});const G=M(Ot),[Bt,Rt]=N("index-anchor");var Et=I({name:Bt,props:{index:F},setup(e,{slots:r}){const n=bt({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),l=S(),{parent:d}=At(Z);if(!d)return;const p=()=>n.active&&d.props.sticky,u=A(()=>{const{zIndex:s,highlightColor:T}=d.props;if(p())return lt(ut(s),{left:n.left?`${n.left}px`:void 0,width:n.width?`${n.width}px`:void 0,transform:n.top?`translate3d(0, ${n.top}px, 0)`:void 0,color:T})});return U({state:n,getRect:(s,T)=>{const C=P(l);return n.rect.height=C.height,s===window||s===document.body?n.rect.top=C.top+V():n.rect.top=C.top+$(s)-T.top,n.rect}}),()=>{const s=p();return c("div",{ref:l,style:{height:s?`${n.rect.height}px`:void 0}},[c("div",{style:u.value,class:[Rt({sticky:s}),{[It]:s}]},[r.default?r.default():e.index])])}}});const J=M(Et),ee=I({setup(e){const r=dt({"zh-CN":{text:"\u6587\u672C",customIndexList:"\u81EA\u5B9A\u4E49\u7D22\u5F15\u5217\u8868"},"en-US":{text:"Text",customIndexList:"Custom Index List"}}),n=S(0),l=[],d=[1,2,3,4,5,6,8,9,10],p="A".charCodeAt(0);for(let u=0;u<26;u++)l.push(String.fromCharCode(p+u));return(u,x)=>(_(),yt(o(st),{active:n.value,"onUpdate:active":x[0]||(x[0]=s=>n.value=s)},{default:b(()=>[c(o(D),{title:o(r)("basicUsage")},{default:b(()=>[c(o(G),null,{default:b(()=>[(_(),X(K,null,Y(l,s=>q("div",{key:s},[c(o(J),{index:s},null,8,["index"]),c(o(y),{title:o(r)("text")},null,8,["title"]),c(o(y),{title:o(r)("text")},null,8,["title"]),c(o(y),{title:o(r)("text")},null,8,["title"])])),64))]),_:1})]),_:1},8,["title"]),c(o(D),{title:o(r)("customIndexList")},{default:b(()=>[c(o(G),{"index-list":d},{default:b(()=>[(_(),X(K,null,Y(d,s=>q("div",{key:s},[c(o(J),{index:s},{default:b(()=>[Tt(Ct(o(r)("title")+s),1)]),_:2},1032,["index"]),c(o(y),{title:o(r)("text")},null,8,["title"]),c(o(y),{title:o(r)("text")},null,8,["title"]),c(o(y),{title:o(r)("text")},null,8,["title"])])),64))]),_:1})]),_:1},8,["title"])]),_:1},8,["active"]))}});export{ee as default};
