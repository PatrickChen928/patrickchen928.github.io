import{H as h,c as A,u as M}from"./use-translate.f00dec62.js";import{c as N,m as T,t as P,w as U}from"./with-install.8c05f7e9.js";import{u as I}from"./use-expose.e5d76f3d.js";import{c as z,i as G,r as y}from"./utils.51167448.js";import{C,B as w,O,P as R,N as W,z as B,x as V,e as l,r as Y,o as Z,a as q,w as p,A as a,d as _,t as x,F as J}from"./vue-libs.dea03542.js";import{G as K,a as j}from"./index.08ae2e5b.js";import{T as L}from"./function-call.371c5c4a.js";import"./constant.bdedcaa1.js";import"./useChildren.3c3a8afb.js";import"./use-route.8c8b61a6.js";import"./index.bd074117.js";import"./useParent.e8f23fef.js";import"./mount-component.d70fed1c.js";import"./index.b6a5a3b7.js";import"./interceptor.3309ba7f.js";import"./use-touch.8bab3413.js";import"./index.c020d7aa.js";import"./index.9fc8b336.js";import"./use-lazy-render.4ae98f04.js";import"./on-popup-reopen.f4e064e0.js";import"./index.3d14facd.js";import"./index.91fa2961.js";var F=1e3,b=60*F,k=60*b,H=24*k;function Q(e){var t=Math.floor(e/H),o=Math.floor(e%H/k),s=Math.floor(e%k/b),u=Math.floor(e%b/F),n=Math.floor(e%F);return{total:e,days:t,hours:o,minutes:s,seconds:u,milliseconds:n}}function X(e,t){return Math.floor(e/1e3)===Math.floor(t/1e3)}function $(e){var t,o,s,u,n=C(e.time),c=w(()=>Q(n.value)),r=()=>{s=!1,z(t)},i=()=>Math.max(o-Date.now(),0),v=f=>{n.value=f,e.onChange==null||e.onChange(c.value),f===0&&(r(),e.onFinish==null||e.onFinish())},d=()=>{t=y(()=>{s&&(v(i()),n.value>0&&d())})},m=()=>{t=y(()=>{if(s){var f=i();(!X(f,n.value)||f===0)&&v(f),n.value>0&&m()}})},D=()=>{!G||(e.millisecond?d():m())},E=()=>{s||(o=Date.now()+n.value,s=!0,D())},g=(f=e.time)=>{r(),n.value=f};return O(r),R(()=>{u&&(s=!0,u=!1,D())}),W(()=>{s&&(r(),u=!0)}),{start:E,pause:r,reset:g,current:c}}function ee(e,t){const{days:o}=t;let{hours:s,minutes:u,seconds:n,milliseconds:c}=t;if(e.includes("DD")?e=e.replace("DD",h(o)):s+=o*24,e.includes("HH")?e=e.replace("HH",h(s)):u+=s*60,e.includes("mm")?e=e.replace("mm",h(u)):n+=u*60,e.includes("ss")?e=e.replace("ss",h(n)):c+=n*1e3,e.includes("S")){const r=h(c,3);e.includes("SSS")?e=e.replace("SSS",r):e.includes("SS")?e=e.replace("SS",r.slice(0,2)):e=e.replace("S",r.charAt(0))}return e}const[te,se]=A("count-down"),ae={time:N(0),format:T("HH:mm:ss"),autoStart:P,millisecond:Boolean};var ne=B({name:te,props:ae,emits:["change","finish"],setup(e,{emit:t,slots:o}){const{start:s,pause:u,reset:n,current:c}=$({time:+e.time,millisecond:e.millisecond,onChange:v=>t("change",v),onFinish:()=>t("finish")}),r=w(()=>ee(e.format,c.value)),i=()=>{n(+e.time),e.autoStart&&s()};return V(()=>e.time,i,{immediate:!0}),I({start:s,pause:u,reset:i}),()=>l("div",{class:se()},[o.default?o.default(c.value):r.value])}});const S=U(ne);const oe={class:"block"},ie=_("span",{class:"colon"},":",-1),le={class:"block"},ue=_("span",{class:"colon"},":",-1),re={class:"block"},Ae=B({setup(e){const t=M({"zh-CN":{reset:"\u91CD\u7F6E",pause:"\u6682\u505C",start:"\u5F00\u59CB",finished:"\u5012\u8BA1\u65F6\u7ED3\u675F",millisecond:"\u6BEB\u79D2\u7EA7\u6E32\u67D3",customStyle:"\u81EA\u5B9A\u4E49\u6837\u5F0F",customFormat:"\u81EA\u5B9A\u4E49\u683C\u5F0F",manualControl:"\u624B\u52A8\u63A7\u5236",formatWithDay:"DD \u5929 HH \u65F6 mm \u5206 ss \u79D2"},"en-US":{reset:"Reset",pause:"Pause",start:"Start",finished:"Finished",millisecond:"Millisecond",customStyle:"Custom Style",customFormat:"Custom Format",manualControl:"Manual Control",formatWithDay:"DD Day, HH:mm:ss"}}),o=C(30*60*60*1e3),s=C(),u=()=>{var i;(i=s.value)==null||i.start()},n=()=>{var i;(i=s.value)==null||i.pause()},c=()=>{var i;(i=s.value)==null||i.reset()},r=()=>L(t("finished"));return(i,v)=>{const d=Y("demo-block");return Z(),q(J,null,[l(d,{title:a(t)("basicUsage")},{default:p(()=>[l(a(S),{time:o.value},null,8,["time"])]),_:1},8,["title"]),l(d,{title:a(t)("customFormat")},{default:p(()=>[l(a(S),{time:o.value,format:a(t)("formatWithDay")},null,8,["time","format"])]),_:1},8,["title"]),l(d,{title:a(t)("millisecond")},{default:p(()=>[l(a(S),{millisecond:"",time:o.value,format:"HH:mm:ss:SS"},null,8,["time"])]),_:1},8,["title"]),l(d,{title:a(t)("customStyle")},{default:p(()=>[l(a(S),{time:o.value},{default:p(m=>[_("span",oe,x(m.hours),1),ie,_("span",le,x(m.minutes),1),ue,_("span",re,x(m.seconds),1)]),_:1},8,["time"])]),_:1},8,["title"]),l(d,{title:a(t)("manualControl")},{default:p(()=>[l(a(S),{ref:(m,D)=>{D.countDown=m,s.value=m},millisecond:"",time:3e3,"auto-start":!1,format:"ss:SSS",onFinish:r},null,512),l(a(K),{clickable:"","column-num":3},{default:p(()=>[l(a(j),{icon:"play-circle-o",text:a(t)("start"),onClick:u},null,8,["text"]),l(a(j),{icon:"pause-circle-o",text:a(t)("pause"),onClick:n},null,8,["text"]),l(a(j),{icon:"replay",text:a(t)("reset"),onClick:c},null,8,["text"])]),_:1})]),_:1},8,["title"])],64)}}});export{Ae as default};
